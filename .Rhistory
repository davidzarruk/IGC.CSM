g3 = c(3, 4, 9, 0),
g4 = c(10, 11, 13, 12),
g5 = c(19, 5, 1, 18))
)
data("HC", package = "mlogit")
HC <- dfidx(HC, varying = c(2:8, 10:16), choice = "depvar")
cooling.modes <- idx(HC, 2) %in% c('gcc', 'ecc', 'erc', 'hpc')
room.modes <- idx(HC, 2) %in% c('erc', 'er')
# installation / operating costs for cooling are constants,
# only relevant for mixed systems
HC$icca[! cooling.modes] <- 0
HC$occa[! cooling.modes] <- 0
# create income variables for two sets cooling and rooms
HC$inc.cooling <- HC$inc.room <- 0
HC$inc.cooling[cooling.modes] <- HC$income[cooling.modes]
HC$inc.room[room.modes] <- HC$income[room.modes]
# create an intercet for cooling modes
HC$int.cooling <- as.numeric(cooling.modes)
# estimate the model with only one nest elasticity
nl <- mlogit(depvar ~ ich + och +icca + occa + inc.room + inc.cooling + int.cooling | 0, HC,
nests = list(cooling = c('gcc','ecc','erc','hpc'),
other = c('gc', 'ec', 'er')), un.nest.el = TRUE)
summary(nl)
HC
nl <- mlogit(depvar ~ ich | 0, HC,
nests = list(cooling = c('gcc','ecc','erc','hpc'),
other = c('gc', 'ec', 'er')), un.nest.el = TRUE)
summary(nl)
HC
names(HC)
data("HC", package = "mlogit")
HC
HC$icca[! cooling.modes] <- 0
HC$icca[! cooling.modes] <- 0
HC$icca[! cooling.modes]
HC$icca[! cooling.modes] <- 0
data("HC", package = "mlogit")
HC$icca[! cooling.modes] <- 0
HC
HC <- dfidx(HC, varying = c(2:8, 10:16), choice = "depvar")
HC
data("JapaneseFDI", package = "mlogit")
JapaneseFDI
head(JapaneseFDI)
JapaneseFDI <- dplyr::select(JapaneseFDI, 1:8)
head(JapaneseFDI)
df
df
head(d)
head(df)
HC
df = dfidx(df, idx=c('id', 'cust_journey'))
nestedlogit = mlogit(
purchased ~ rand_price,
data = df[1:1000,],
##The variable from which our nests are determined
alt.var = 'id',
#The variable that dictates the binary choice
choice = 'purchased',
#List of nests as named vectors
nests = list(g1 = c(16, 7, 8, 2),
g2 = c(15, 6, 17, 14),
g3 = c(3, 4, 9, 0),
g4 = c(10, 11, 13, 12),
g5 = c(19, 5, 1, 18))
)
nestedlogit = mlogit(
purchased ~ rand_price,
data = df[1:1000,],
#The variable that dictates the binary choice
choice = 'purchased',
#List of nests as named vectors
nests = list(g1 = c(16, 7, 8, 2),
g2 = c(15, 6, 17, 14),
g3 = c(3, 4, 9, 0),
g4 = c(10, 11, 13, 12),
g5 = c(19, 5, 1, 18))
)
df = dfidx(df, idx=c('id', 'cust_journey'), choice='purchased')
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.factor(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = dfidx(df, idx=c('id', 'cust_journey'), choice='purchased')
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
#df$purchased = as.factor(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = dfidx(df, idx=c('id', 'cust_journey'), choice='purchased')
head(df)
df$purchased = as.logical(df$purchased)
df = dfidx(df, idx=c('id', 'cust_journey'), choice='purchased')
nestedlogit = mlogit(
purchased ~ rand_price,
data = df[1:1000,],
#List of nests as named vectors
nests = list(g1 = c(16, 7, 8, 2),
g2 = c(15, 6, 17, 14),
g3 = c(3, 4, 9, 0),
g4 = c(10, 11, 13, 12),
g5 = c(19, 5, 1, 18))
)
nestedlogit = mlogit(
purchased ~ prices,
data = df,
#List of nests as named vectors
nests = list(g1 = c(16, 7, 8, 2),
g2 = c(15, 6, 17, 14),
g3 = c(3, 4, 9, 0),
g4 = c(10, 11, 13, 12),
g5 = c(19, 5, 1, 18))
)
nestedlogit = mlogit(
purchased ~ prices,
data = df[1:3000,],
#List of nests as named vectors
nests = list(g1 = c(16, 7, 8, 2),
g2 = c(15, 6, 17, 14),
g3 = c(3, 4, 9, 0),
g4 = c(10, 11, 13, 12),
g5 = c(19, 5, 1, 18))
)
nestedlogit = mlogit(
purchased ~ prices,
data = df[1:1000,],
#List of nests as named vectors
nests = list(g1 = c(16, 7, 8, 2),
g2 = c(15, 6, 17, 14),
g3 = c(3, 4, 9, 0),
g4 = c(10, 11, 13, 12),
g5 = c(19, 5, 1, 18))
)
df
df[1:00,]
df[1:100,]
df[1:200,]
df %>% print(n=40)
min(df$prices)
df[df$prices==min(df$prices),]
df[df$purchased==TRUE,]
df[df$purchased==TRUE,] %>% group_by(id)
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df[df$purchased==TRUE,] %>% group_by(id)
df[df$purchased==TRUE,] %>% group_by(id) %>% summarise(n=n())
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df[df$purchased==TRUE,] %>% group_by(id) %>% summarise(n=n())
df = dfidx(df, idx=c('id', 'cust_journey'), choice='purchased')
nestedlogit = mlogit(
purchased ~ prices,
data = df[1:1000,],
#List of nests as named vectors
nests = list(g1 = c(16, 7, 8, 2),
g2 = c(15, 6, 17, 14),
g3 = c(3, 4, 9, 0),
g4 = c(10, 11, 13, 12),
g5 = c(19, 5, 1, 18))
)
df
df[df$purchased==TRUE,] %>% group_by(id) %>% summarise(n=n())
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df[df$purchased==TRUE,] %>% group_by(id) %>% summarise(n=n())
nestedlogit = mlogit(
purchased ~ prices,
data = df[1:1000,])
nestedlogit = mlogit(
purchased ~ prices,
data = df[1:1000,], method = "nr")
df
df = dfidx(df, idx=c('id'), choice='purchased')
nestedlogit = mlogit(
purchased ~ prices,
data = df[1:1000,], method = "nr")
df
id(df)
vec_group_id(df)
data("Heating", package = "mlogit")
Heating
H <- dfidx(Heating, choice = "depvar", varying = c(3:12))
H
df = dfidx(df, idx=c('cust_journey', 'id'), choice='purchased')
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = dfidx(df, idx=c('cust_journey', 'id'), choice='purchased')
nestedlogit = mlogit(
purchased ~ prices,
data = df[1:1000,], method = "nr")
nestedlogit = mlogit(
purchased ~ prices,
data = df, method = "nr")
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df[df$purchased==TRUE,] %>% group_by(id) %>% summarise(n=n())
df
nestedlogit = mlogit(
purchased ~ rand_price,
data = df, method = "nr")
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df[df$purchased==TRUE,] %>% group_by(id) %>% summarise(n=n())
df = df %>% filter(id %in% c(10, 19, 14))
df = dfidx(df, idx=c('cust_journey', 'id'), choice='purchased')
nestedlogit = mlogit(
purchased ~ rand_price,
data = df, method = "nr")
df
nestedlogit = mlogit(
purchased ~ rand_price,
data = df, method = "nr")
nestedlogit = mlogit(
purchased ~ prices,
data = df)
nestedlogit = mlogit(
purchased ~ prices + rand,
data = df)
nestedlogit = mlogit(
purchased ~ rand_price,
data = df)
df = df %>% filter(id %in% c(10, 19))
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = df %>% filter(id %in% c(10, 19))
df = dfidx(df, idx=c('cust_journey', 'id'), choice='purchased')
nestedlogit = mlogit(
purchased ~ rand_price,
data = df)
glm(purchased ~ rand_price,family=binomial(link='logit'),data=df)
nestedlogit = mlogit(
purchased ~ rand_price,
data = df)
nestedlogit = mlogit(
purchased ~ 0 | rand_price,
data = df)
nestedlogit = mlogit(
purchased ~ 0 | prices,
data = df)
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = dfidx(df, idx=c('id'), choice='purchased')
nestedlogit = mlogit(
purchased ~ 0 | prices,
data = df)
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = df %>% filter(id %in% c(10, 19))
df = dfidx(df, idx=c('id'), choice='purchased')
nestedlogit = mlogit(
purchased ~ 0 | prices,
data = df)
glm(purchased ~ rand_price,family=binomial(link='logit'),data=df)
df
nestedlogit = mlogit(
purchased ~ prices | 0,
data = df)
)
nestedlogit = mlogit(
purchased ~ prices | 0,
data = df
)
summary(nestedlogit)
df
nestedlogit = mlogit(
purchased ~ prices,
data = df
)
df
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = df %>% filter(id %in% c(10, 19))
df
df = dfidx(df, idx=c('id'), choice='purchased')
df
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = df %>% filter(id %in% c(10, 19))
df = dfidx(df, idx=c('cust_journey', 'id'), choice='purchased')
nestedlogit = mlogit(
purchased ~ prices | 0,
data = df
)
nestedlogit = mlogit(
purchased ~ 0 | prices,
data = df
)
math = read.table("http://www.utstat.utoronto.ca/~brunner/data/legal/mathcat.data.txt")
math = read.table("http://www.utstat.utoronto.ca/~brunner/data/legal/mathcat.data.txt")
math0 = math[,c(1,5)];
long0 = mlogit.data(math0,shape="wide",choice="passed")
long0
math0
long0
head(math0)
data("ModeChoice",package="Ecdat")
install.packages("Ecdat")
data("ModeChoice",package="Ecdat")
ModeChoice
ModeChoice2 <- mlogit.data(ModeChoice,choice="mode",shape="vert",
alt=c("air","train","bus","car"))
ModeChoice <- mlogit.data(ModeChoice,choice="mode",shape="vert",
alt=c("air","train","bus","car"))
data("ModeChoice",package="Ecdat")
ModeChoice <- mlogit.data(ModeChoice,choice="mode",shape="vert",
alt=c("air","train","bus","car"))
data("TravelMode", package = "AER")
TM <- mlogit.data(TravelMode, choice = "choice", shape = "long",
alt.levels = c("air", "train", "bus", "car"))
TravelMode
TM
df
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = df %>% filter(id %in% c(10, 19))
head(df)
mlogit.data(df, choice = "purchased", shape = "long",
alt.levels = c(10, 19))
mlogit.data(df, choice = "purchased", shape = "long",
alt.levels = c("10", "19"))
head(df)
head(TravelMode)
data("TravelMode", package = "AER")
TM <- mlogit.data(TravelMode, choice = "choice", shape = "long",
alt.levels = c("air", "train", "bus", "car"))
head(TravelMode)
TM
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = df %>% select(-X)
df = df %>% filter(id %in% c(10, 19))
df
mlogit.data(df, choice = "purchased", shape = "long",
alt.levels = c("10", "19"))
df_logit = mlogit.data(df, choice = "purchased", shape = "long",
alt.levels = c("10", "19"))
nestedlogit = mlogit(
purchased ~ prices,
data = df_logit
)
df_logit = mlogit.data(df, choice = "purchased", shape = "long",
alt.levels = c("10", "19"))
nestedlogit = mlogit(
purchased ~ 0 | prices,
data = df_logit
)
nestedlogit = mlogit(
purchased ~ prices | 0,
data = df_logit
)
nestedlogit = mlogit(
purchased ~ rand_price | 0,
data = df_logit
)
nestedlogit = mlogit(
purchased ~ rand_price,
data = df_logit
)
df
df_logit
nestedlogit = mlogit(
purchased ~ prices | 0 | 0,
data = df_logit
)
library("mlogit", "AER")
library(stringr)
library(tidyverse)
rm(list = ls())
df = read.csv("/Users/zarruk/Downloads/synthetic_dataset.csv")
df = df %>% separate(id, c("cust_journey", "id"), "_")
df$purchased = as.logical(df$purchased)
df$id = as.factor(df$id)
df$rand = runif(dim(df)[1], 0, 0.5)
df$rand_price = df$prices + df$rand
df = df %>% select(-X)
head(df)
df = df %>% filter(id %in% c(10, 19)) %>% arrange("cust_journey", "id")
df_logit = mlogit.data(df, choice = "purchased", shape = "long",
alt.levels = c("10", "19"))
nestedlogit = mlogit(
purchased ~ prices | 0 | 0,
data = df_logit
)
table(df$purchased)
table(df_logit$purchased)
nestedlogit = mlogit(
purchased ~ prices | 0 | 0,
data = df_logit[1:1000,]
)
nestedlogit = mlogit(
purchased ~ prices,
data = df_logit[1:1000,]
)
library(shiny); runApp('Documents/IGCities/shiny_app.R')
runApp('Documents/IGCities/shiny_app.R')
runApp('Documents/IGCities/shiny_app.R')
source("~/Documents/IGC.CSM/main_test.R", echo=TRUE)
